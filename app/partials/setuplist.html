<div class="container" ng-cloack>
    <div ng-hide="auth.user">Sign in to begin</div>

    <div ng-show="auth.user">
        <h2>Setup List</h2>

        <ul class="row" ng-repeat="setup in setups | orderByPriority">
            <li>
                <a ng-model="clicked" ng-init="clicked=false" ng-click="clicked = !clicked" title="{{setup.$id}}">{{setup.name || setup.$id}}</a>

                <div ng-if="clicked" class="animate-if">
                    <div class="col-xs-12 col-sm-11 col-md-10">
                        <h2>Setup Details</h2>

                        <div ng-include="'partials/setupview.html'"></div>

                        <form class="form-inline" role="form">
                            <div class="form-group">
                                <button class="btn btn-default" ng-click="cloneSetup(setup)"
                                   data-loading-text="Please Wait..."
                                   ng-href="#/setupwizard">Clone Setup</button>
                                <a ng-show="setup.running" href="{{getStagingJobUrl(setup.jobRef.path.m[1])}}"
                                   target="_blank">[stagingJob: {{setup.jobRef.path.m[1]}}]</a>
                                <label ng-hide="setup.running" for="runTime">Run time (in secs)</label>
                                <input ng-hide="setup.running" id="runTime" name="runTime"
                                       class="form-control"
                                       type="number"
                                       ng-required="true"
                                       ng-model="newSetup.runTime">
                                <button class="btn btn-primary" ng-click="runSetup(setup)" ng-hide="setup.running"
                                   data-loading-text="Please Wait...">New Run</button>
                                <button class="btn btn-primary" ng-click="abortRun(setup)" ng-show="setup.running"
                                   data-loading-text="Please Wait...">Cancel Run</button>
                                <i class="fa fa-spinner fa-spin" ng-show="setup.running"></i>
                            </div>
                        </form>
                    </div>
                </div>
            </li>
        </ul>
    </div>
</div>